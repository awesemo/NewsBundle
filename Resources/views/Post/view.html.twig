<div class="container">
    <div class="row-fluid">
        <div class="span12">

            {% if post.image %}
                {% if post.image.providerName  == 'sonata.media.provider.image' %}
                    <div class="hover_img">
                        <a href="{%  path post.image, 'reference' %}" data-rel="prettyPhoto"><img src="{%  path post.image, 'reference' %}" alt=""/></a>
                    </div>
                {% else %}
                    <div class="vendor">
                        {% media post.image, 'reference' %}
                    </div>
                {% endif %}
            {% endif %}

            <h1>{{ post.title }}</h1>
            <h2 class="center">
                {{ post.publicationDateStart | format_date }} {{ 'archive_author'|trans({'%author%': post.author }, 'SonataNewsBundle') }}
                {% if post.postHasCategory | length > 0 %} |
                    {% for postHasCategory in post.postHasCategory %}
                        {% if postHasCategory.enabled  and postHasCategory.category.page %}
                            {% set category_url = rz_render_page_alias_url(postHasCategory.category.page.getPageAlias()) %}
                            {% if  category_url %}
                                <a href="{{ url(category_url) }}">{{ postHasCategory.category.name }}</a>{% if not loop.last %}, {% endif %}
                            {% else %}
                                <a href="#">{{ postHasCategory.category.name }}</a>{% if not loop.last %}, {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </h2>
            <h4 class="center">
                <i class="icon-tags grey"></i>
                {% for tag in post.tags %}
                    <a href="{{ url('rz_news_tag', { 'tag': tag.slug } ) }}">{{ tag.name }}</a>{% if not loop.last %}, {% endif %}
                {% endfor %}
            </h4>
            <div class="pad25"></div>
            {{ post.content|raw }}
        </div>
    </div>
</div>
{% if post.iscommentable %}
<article class="sonata-blog-post-container">
    {% render(controller('SonataNewsBundle:Post:comments', {'postId': post.id})) %}

    {% if post.iscommentable %}
        {% render(controller('SonataNewsBundle:Post:addCommentForm', {
            'postId': post.id,
            'form': form
        })) %}
    {% else %}
        <div>
            {{ 'message_comments_are_closed'|trans({}, 'SonataNewsBundle') }}
        </div>
    {% endif %}
</article>
{% endif %}
